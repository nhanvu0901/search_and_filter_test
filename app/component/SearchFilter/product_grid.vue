<template>
    <!--    <div class="product-grid-container">-->
    <!--        <div v-for="product in product_list">-->
    <!--            <a :href="'/products/' + product.handle + (product.variants.length > 0 ? '?variant=' + returnVariant(product.variants).id : '')">-->
    <!--                <div class="zoom-container">-->
    <!--                    <img :src="product.img_src">-->
    <!--                </div>-->
    <!--                <div>{{ product.title }}</div>-->
    <!--                <div>{{ returnVariant(product.variants).price }} {{ currency }}</div>-->
    <!--            </a>-->
    <!--        </div>-->
    <!--    </div>-->


    <div class="product-grid-container" id="ProductGridContainer">
        <div class="collection page-width">
            <div class="loading-overlay gradient"></div>
            <ul data-settings="{&quot;products_per_page&quot;:20,&quot;columns_desktop&quot;:4,&quot;image_ratio&quot;:&quot;adapt&quot;,&quot;image_shape&quot;:&quot;default&quot;,&quot;show_secondary_image&quot;:true,&quot;show_vendor&quot;:false,&quot;show_rating&quot;:false,&quot;enable_quick_add&quot;:false,&quot;enable_filtering&quot;:false,&quot;filter_type&quot;:&quot;horizontal&quot;,&quot;enable_sorting&quot;:false,&quot;columns_mobile&quot;:&quot;2&quot;,&quot;padding_top&quot;:0,&quot;padding_bottom&quot;:68}"
                id="gf-products" class="
                grid product-grid grid--2-col-tablet-down
                grid--4-col-desktop"
                old-id="product-grid" style="min-height: auto;">
                <li class="grid__item" v-for="product in product_list">
                    <div class="card-wrapper product-card-wrapper underline-links-hover">
                        <div class="card
                                  card--card
                                   card--media
                                   color-[object Object]

                                  " style="--ratio-percent: 100%;">
                            <div class="card__inner  ratio" style="--ratio-percent: 100%;">
                                <div class="card__media">
                                    <div class="media media--transparent media--hover-effect">
                                        <img
                                            :src="product.img_src"
                                            sizes="(min-width: 1200px) 267px, (min-width: 990px) calc((100vw - 130px) / 4), (min-width: 750px) calc((100vw - 120px) / 3), calc((100vw - 35px) / 2)"
                                            alt="" class="motion-reduce" width="549" height="549"></div>
                                </div>

                            </div>
                            <div class="card__content">
                                <div class="card__information">
                                    <h3 class="card__heading h5">
                                        <a :href="'/products/' + product.handle + (product.variants.length > 0 ? '?variant=' + returnVariant(product.variants).id : '')"

                                           class="full-unstyled-link"
                                           >
                                            {{product.title}}
                                        </a>
                                    </h3>
                                    <div class="card-information">
                                        <div class="price">
                                            <div class="price__container">
                                                <div class="price__regular">
                                                    <span
                                                        class="visually-hidden visually-hidden--inline">Regular price</span>
                                                    <span class="price-item price-item--regular">
                                      ${{ returnVariant(product.variants).price }} {{ currency }}
                                    </span>
                                                </div>
                                                <div class="price__sale"><span
                                                    class="visually-hidden visually-hidden--inline">Regular price</span>
                                                    <span>
                                      <s class="price-item price-item--regular">  $0 SGD  </s>
                                    </span><span class="visually-hidden visually-hidden--inline">Sale price</span>
                                                    <span class="price-item price-item--sale price-item--last">
                                      ${{ returnVariant(product.variants).price }} {{ currency }}
                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card__badge bottom left"></div>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</template>
<script setup>

</script>
<script>


export default {
    name: "ProductGrid",
    emits: [],
    props: {
        product_list: Array

    },
    data() {
        return {
            currency: null
        }
    },
    methods: {
        returnVariant(variants) {
            if (variants.length > 1) {
                for (let item of variants) {
                    if (item.price !== null) {
                        return item
                    }
                }
            } else {
                return variants[0]
            }
        }
    },

    mounted() {
        this.currency = Shopify.currency.active

    }
}
</script>

